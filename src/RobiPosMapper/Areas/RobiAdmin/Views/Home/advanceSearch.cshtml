@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Advance Search</title>
    <link href="~/Assets/Amsterdam/css/main.css" rel="stylesheet" type="text/css" />
    <!--[if IE]> <link href="css/ie.css" rel="stylesheet" type="text/css"> <![endif]-->

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/jquery_ui_custom.js"></script>

    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/charts/excanvas.min.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/charts/jquery.flot.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/charts/jquery.flot.resize.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/charts/jquery.sparkline.min.js"></script>

    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/forms/jquery.tagsinput.min.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/forms/jquery.inputlimiter.min.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/forms/jquery.maskedinput.min.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/forms/jquery.autosize.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/forms/jquery.ibutton.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/forms/jquery.dualListBox.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/forms/jquery.validate.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/forms/jquery.uniform.min.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/forms/jquery.select2.min.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/forms/jquery.cleditor.js"></script>

    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/uploader/plupload.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/uploader/plupload.html4.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/uploader/plupload.html5.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/uploader/jquery.plupload.queue.js"></script>

    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/wizard/jquery.form.wizard.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/wizard/jquery.form.js"></script>

    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/ui/jquery.collapsible.min.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/ui/jquery.timepicker.min.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/ui/jquery.jgrowl.min.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/ui/jquery.pie.chart.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/ui/jquery.fullcalendar.min.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/ui/jquery.elfinder.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/ui/jquery.fancybox.js"></script>

    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/tables/jquery.dataTables.min.js"></script>

    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/bootstrap/bootstrap.min.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/bootstrap/bootstrap-bootbox.min.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/bootstrap/bootstrap-progressbar.js"></script>
    <script type="text/javascript" src="~/Assets/Amsterdam/js/plugins/bootstrap/bootstrap-colorpicker.js"></script>

    <script type="text/javascript" src="~/Assets/Amsterdam/js/functions/custom.js"></script>

    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    @*<script type="text/javascript" src="~/Assets/Amsterdam/js/charts/chart.js"></script>*@
    <link href="~/Assets/Amsterdam/css/extendedBootstrap.css" rel="stylesheet" />
    <style>
        .control-group {
            float:left;
        }
    </style>
    <style>
        .trpos {
            cursor: pointer;
        }

            .trpos:hover {
                background-color: lightyellow;
            }

        .panel-info > .panel-heading {
            color: #3a87ad;
            background-color: #ffcb05;
            border-color: #ffcb05;
            color: #0B0A0A;
        }

        #layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            opacity: .8;
            z-index: 100003;
            display: none;
            overflow: hidden;
        }

        #popup {
            width: 90%;
            height: 95%;
            position: fixed;
            margin: auto;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 100013;
            border: 1px solid green;
            padding: 10px;
            background-color: #fff;
            display: none;
        }

        #pickEmployee {
            height: 100%;
            width: 100%;
            overflow-y: scroll;
            overflow-x: hidden;
        }

        #mapcanvas {
            height: 90%;
            width: 100%;
        }

        .boxclose {
            float: right;
            margin-top: -30px;
            margin-right: -30px;
            cursor: pointer;
            color: #fff;
            border: 1px solid #AEAEAE;
            border-radius: 30px;
            background: #605F61;
            font-size: 31px;
            font-weight: bold;
            display: inline-block;
            line-height: 0px;
            padding: 11px 3px;
        }
    </style>
    <style>
        .input-group {
            width: 100%;
        }

        .input-group-addon {
            text-align: left;
            width: 30%;
        }
    </style>
    
    <script>
        $(function () {
            $('#boxclose').click(function () {
               
                $('#popup,#layer').hide();
            });
            $('#layer').click(function () {
                
                $('#popup,#layer').hide();
            });
        });

    </script>
</head>
<body>
    <div id="layer"></div>
    <div id="popup">
        <a class="boxclose" id="boxclose">x</a>
        <div id="pickEmployee">

            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default" id="existing-data">
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-6 basicReatiler">
                                    <div class="panel panel-info">
                                        <div class="panel-heading">
                                            &nbsp;<span class="fa fa-globe"></span>Retailer Information

                                        </div>
                                        <div class="panel-body">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <span class="fa fa-columns"></span>
                                                            Retailer Name:<input type="hidden" id="retailerId" /><input type="hidden" id="verifyStatus" />
                                                        </span>
                                                        <span class="form-control tdRetailerName"></span>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <span class="fa fa-building"></span>
                                                            Address:
                                                        </span>
                                                        <span class="form-control tdAddress"></span>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <span class="fa fa-sun-o"></span> Visit Day:
                                                        </span>
                                                        <span class="form-control tdVisitDay"></span>
                                                        
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <span class="fa fa-gear"></span> Retailer Structure:
                                                        </span>
                                                        <span class="form-control tdrStructure"></span>
                                                        
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <span class="fa fa-home"></span> Shop Signage:
                                                        </span>
                                                        <span class="form-control tdShopSignage"></span>
                                                        
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <span class="fa fa-sitemap"></span> Shop Type:
                                                        </span>
                                                        <span class="form-control tdShopType"></span>
                                                        
                                                    </div>

                                                </div>
                                            </div>


                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <span class="fa fa-user"></span> DSR:
                                                        </span>
                                                        <span class="form-control tdDSR"></span>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <span class="fa fa-mobile-phone"></span> DSR MSISDN:
                                                        </span>
                                                        <span class="form-control tdDsrMsisdn"></span>

                                                    </div>

                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            <span class="fa fa-road"></span> Route Plan:
                                                        </span>
                                                        <span class="form-control tdRoutePlan"></span>

                                                    </div>

                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    @*<div class="input-group">
                                                            <span class="input-group-addon">
                                                                <span class="fa fa-mobile"></span>
                                                                ElMSISDN:
                                                            </span>
                                                            <span class="form-control tdElMsisdn"></span>
                                                            <input class="form-control txtElMsisdn" type="text" id="txtElMsisdn" style="display:none;" />
                                                        </div>*@


                                                    <div class="input-group elmsisdnAdd" style="display:none;">
                                                        

                                                    </div>

                                                    <div class="input-group simposAdd" style="display:none;">
                                                        

                                                    </div>
                                                    <div>
                                                        <div class="input-group">
                                                            <span class="input-group-addon">
                                                                <span class="fa fa-road"></span> Verify:
                                                            </span>
                                                            <span class="form-control tdVerify"></span>

                                                        </div>
                                                    </div>


                                                </div>
                                            </div>


                                        </div>
                                        
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="panel panel-info">
                                        <div class="panel-heading">&nbsp;<span class="fa fa-thumb-tack"></span> Retailer Demografic Information</div>
                                        <div class="panel-body">

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">Region</span>
                                                        <span class="form-control tdRegion"></span>

                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">Area</span>
                                                        <span class="form-control tdArea"></span>

                                                    </div>
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">Thana</span>
                                                        <span class="form-control tdThana"></span>
                                                        
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">Word</span>
                                                        <span class="form-control tdWard"></span>
                                                        
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">Mauza</span>
                                                        <span class="form-control tdMauza"></span>
                                                        
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">Village</span>
                                                        <span class="form-control tdVillage"></span>
                                                       
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            EL POS
                                                            <input class="form-control" id="isElPos" type="checkbox">
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            SIM POS
                                                            <input class="form-control" id="isSimPos" type="checkbox">
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">
                                                            SC POS
                                                            <input class="form-control" id="isSCPos" type="checkbox">
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-4">
                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isAppartment">
                                                        <i></i>Appartment
                                                    </label>
                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isSlum">
                                                        <i></i>Slum
                                                    </label>
                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isSemiurbanHouseing">
                                                        <i></i>Semi-urbun Housing
                                                    </label>
                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isRuralHousing">
                                                        <i></i>Rural Housing
                                                    </label>
                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isShoppingMall">
                                                        <i></i>Shopping Mall
                                                    </label>
                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isRetailHub">
                                                        <i></i>Retail Hub
                                                    </label>
                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isMobileDevice">
                                                        <i></i>Mobile Device Market
                                                    </label>
                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isBazar">
                                                        <i></i>Bazaar
                                                    </label>
                                                </div>
                                                <div class="col-md-4">


                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isOfficeArea">
                                                        <i></i>Office Area
                                                    </label>
                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isGarmentsMajority">
                                                        <i></i>Garments Majority Area
                                                    </label>
                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isGeneralIndustrial">
                                                        <i></i>General Industrial Area
                                                    </label>
                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isUrbanTransit">
                                                        <i></i>Urban Transit Point
                                                    </label>

                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isRuralTransit">
                                                        <i></i>Rural Transit Point
                                                    </label>

                                                </div>
                                                <div class="col-md-4">

                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isUrbarHangouts">
                                                        <i></i>Urban Youth Hangouts
                                                    </label>
                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isSemiUrbanHangouts">
                                                        <i></i>Semi-urban Youth Hangouts
                                                    </label>

                                                    <label class="checkbox">
                                                        <input type="checkbox" id="isRuralHangouts">
                                                        <i></i>Rural Youth Hangouts
                                                    </label>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="panel panel-info">
                                        <div class="panel-heading">&nbsp;<span class="fa fa-thumb-tack"></span> Retailer Photo</div>
                                        <div class="panel-body">

                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="input-group" style="text-align:center;">
                                                        <img id="posImage" style=" width:80%;height:auto;" />
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="panel panel-info">
                                        <div class="panel-heading">&nbsp;<span class="fa fa-thumb-tack"></span> QR Photo</div>
                                        <div class="panel-body">

                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="input-group" style="text-align:center;">
                                                        <img id="qrImage" style=" width:80%;height:auto;" />
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="panel panel-info">
                                        <div class="panel-heading"><span class="glyphicon glyphicon-map-marker"></span>&nbsp; Retailer Map</div>
                                        @*First Row Name and Mobile*@
                                        <div class="panel-body">
                                            <div class="row">
                                                <div class="col-md-12 col-xs-12 box-shadow" id="Retailermapcanvas" style="height:250px; width:95%; border:0px; margin:1px auto;"></div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>




                        </div>
                    </div>
                </div>
            </div>




        </div>
    </div>



    <!-- Top nav -->
    <div id="top">
        <div class="top-wrapper">
            <a href="index" title=""><img src="~/Assets/Amsterdam/images/logo.png" class="logo" alt="" /></a>
            <ul class="topnav">
                <li class="topuser">
                    <a title="" data-toggle="dropdown"><img src="~/Assets/Amsterdam/images/user.png" alt="" /><span>@Session["LoginName"]</span></a>
                </li>
                <li class="sidebar-button"><a href="#" title=""><b class="responsive-nav"></b></a></li>
                <li><a href="/robiAdmin/Login" title=""><b class="logout"></b></a></li>
            </ul>
        </div>
    </div>
    <!-- /top nav -->
    <!-- Main wrapper -->
    <div class="wrapper three-columns">

        <!-- Left sidebar -->
        <div class="sidebar" id="left-sidebar">
            <ul class="navigation standard">
                <!-- standard nav -->
                <li><a href="Index" title=""><img src="~/Assets/Amsterdam/images/icons/mainnav/dashboard.png" alt="" />Dashboard</a></li>
                <li class="active">
                    <a href="AdvanceSearch" title=""><img src="~/Assets/Amsterdam/images/icons/mainnav/form-elements.png" alt="" />Advance Serach</a>
                </li>
            </ul><!-- /standard nav -->
            <div class="separator-doubled"></div>
            <!-- Stats progress -->
            <!-- /stats progress -->
        </div>
        <!-- /left sidebar -->
        <!-- Main content -->
        <div class="content">
            <div class="outer">
                <div class="inner">
                    <div class="page-header">
                        <!-- Page header -->
                        <h5><i class="icon-search"></i>Advance Search Panel</h5>
                    </div><!-- /page header -->
                    <div class="body">
                        <!-- /middle navigation standard -->
                        <!-- Content container -->
                        <div class="container">
                            <div class="row-fluid">
                                <!-- Column -->
                                <div class="span12">
                                    <!-- Timeline messages -->
                                    <div class="block well">

                                        <div class="navbar"><div class="navbar-inner"><h5>Search Parameters</h5></div></div>

                                        <form action="" id="order-form" class="smart-form" novalidate="novalidate">

                                            <div class="control-group">
                                                <label class="control-label">Area:</label>
                                                <div class="controls">
                                                    <select class="select-search" name="area" id="areaCombo" style="width:150px;">
                                                        <option value="0" selected="">Select a Area</option>
                                                        @foreach (var row in ViewBag.AreaList.Rows)
                                                        {
                                                            <option value="@row["AreaId"]">@row["AreaName"]</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="control-group">
                                                <label class="control-label">RSP:</label>
                                                <div class="controls">
                                                    <select name="rsp" id="rspCombo" style="width:150px;" data-placeholder="Select a RSP..." class="select-search" tabindex="2">
                                                        <option value="0" selected>Select a RSP</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="control-group">
                                                <label class="control-label">DSR:</label>
                                                <div class="controls">
                                                    <select name="sr" id="srCombo" style="width:150px;" data-placeholder="Select a SR..." class="select-search" tabindex="2">
                                                        <option value="0" selected>Select a SR</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="control-group">
                                                <label class="control-label">Start Date:</label>
                                                <div class="controls">
                                                    <div class="date-trigger"><input type="text" style="width:135px;" name="startdate" placeholder="Start Date" id="datepicker-icon" /></div>
                                                </div>
                                            </div>
                                            <div class="control-group">
                                                <label class="control-label">End Date:</label>
                                                <div class="controls">
                                                    <div class="date-trigger"><input type="text" style="width:135px;" name="enddate" placeholder="End Date" id="datepicker-icon2" /></div>
                                                </div>
                                            </div>
                                            <div class="control-group" style="position:relative;">
                                                <input type="hidden" id="hdArea" value="0" />
                                                <input type="hidden" id="hdRsp" value="0" />
                                                <input type="hidden" id="hdDsr" value="0" />
                                                <input type="hidden" id="hdStart" value="" />
                                                <input type="hidden" id="hdEnd" value="" />
                                                <div class="controls" style="margin-top:22px;">
                                                    <button id="btnsearch" type="button" class="btn btn-lg">Search <i class="icon-search"></i></button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="separator-doubled"></div>

                            <div class="block well">
                                <div class="navbar">
                                    <div class="navbar-inner">
                                        <h5>Search Result</h5>
                                        <ul class="icons">
                                            <li><a id="btnExport" href="ExportToExcel" class="hovertip" title="Export To Excel"><i class="icon-download-alt"></i></a></li>
                                            <li><a id="btnExport2" href="ExportToCSV" class="hovertip" title="Export To CSV"><i class="icon-download-alt"></i></a></li>
                                        </ul>



                                    </div>
                                </div>
                                <div class="table-overflow">
                                    <table class="table table-striped" id="data-table">
                                        <thead>
                                            <tr>
                                                <th>Area</th>
                                                <th>RSP</th>
                                                <th>DSR</th>
                                                <th>DSR MSISDN</th>
                                                <th>Retailer Name</th>
                                                <th>Retailer Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tblsearchResult"></tbody>
                                    </table>

                                </div>
                            </div>


                            <div class="separator-doubled"></div>
                            <div class="row-fluid">
                                <!-- Column -->
                                <div class="span12">
                                    <div class="block well">
                                        <div class="navbar">
                                            <div class="navbar-inner">
                                                <h5>Map</h5>
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="panel panel-info">
                                                @*<div class="panel-heading"><span class="glyphicon glyphicon-map-marker"></span>&nbsp; Retailer Map</div>*@
                                                @*First Row Name and Mobile*@
                                                <div class="panel-body">
                                                    <div class="row">
                                                        <div class="col-md-12 col-xs-12 box-shadow" id="mapcanvas" style="height:500px; width:100%; border:0px; margin:0px auto;"></div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                                <!-- /content container -->
                            </div>
                        </div>
            </div>
        </div>
        <!-- /main content -->
        <!-- Right sidebar -->
        <!-- /right sidebar -->
    </div>
    <!-- /main wrapper -->

    <script type="text/javascript">
    
        $(function () {
            $('#data-table').on('click', 'tr', function () {
                $('#popup,#layer').show();
                var popupData = $(this).data('posData');
                $('#verifyStatus').val(popupData.Verified);
                $('#retailerId').val(popupData.ID);
                var RetailerName = popupData.RetailerName;
                var RetailerLat = popupData.Lat;
                var RetailerLon = popupData.Lon;


                var urlData = '@Url.Action("GetElmsisdn", "Home")';
                $.ajax({
                    type: "POST", url: urlData,
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify({ id: popupData.ID }),
                    dataType: "json",
                    success: function (result) {
                        if (result.msg == "success") {
                            $('.existElmsisdn').remove();
                            $.each(result.Rdata, function () {
                                $('.elmsisdnAdd').before('<div class="input-group existElmsisdn">'
                                                        + '<span class="input-group-addon">'
                                                            + '<span class="fa fa-mobile"></span>'
                                + 'ELMSISDN:'
                               + ' </span>'
                                + '<span class="form-control elmsisdnName">' + this.Name + '</span>'
                            + '</div>');

                            });
                        }
                        else {
                            alert(result.msg);
                        }
                    },
                    error: function (request, status, error) {
                        alert("Failed to load elmsisdns. Error Details-  Request: " + request + " Status: " + status + " Error: " + error);
                    }
                });


                var urlData = '@Url.Action("GetSimpos", "Home")';
                $.ajax({
                    type: "POST", url: urlData,
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify({ id: popupData.ID }),
                    dataType: "json",
                    success: function (result) {
                        if (result.msg == "success") {
                            $('.existSimpos').remove();
                            $.each(result.Rdata, function () {
                                $('.simposAdd').before('<div class="input-group existSimpos">'
                                                        + '<span class="input-group-addon">'
                                                            + '<span class="fa fa-mobile"></span>'
                                + 'SIM POS:'
                               + ' </span>'
                                + '<span  class="form-control simposName">' + this.Name + '</span>'
                            + '</div>');

                            });
                        }
                        else {
                            alert(result.msg);
                        }
                    },
                    error: function (request, status, error) {
                        alert("Failed to load SIM POS. Error Details-  Request: " + request + " Status: " + status + " Error: " + error);
                    }
                });


                var dev = $(this).find('.dev').html();
                var markers = [];
                var obj = new Object();
                obj.title = RetailerName;
                obj.lat = RetailerLat;
                obj.lng = RetailerLon;
                obj.description = RetailerName;
                if (RetailerLat != 0) {
                    markers.push(obj);
                }

                if (popupData.Verified == true) {
                    $('.tdVerify').html('Yes');
                }
                else {
                    $('.tdVerify').html('No');
                }

                $('.tdRegion').html(popupData.Region);
                $('.tdArea').html(popupData.Area);
                $('.tdThana').html(popupData.Thana);
                $('.tdWard').html(popupData.Ward);
                $('.tdMauza').html(popupData.Mauza);
                $('.tdVillage').html(popupData.Village);

                $('#popthanaCombo').val(popupData.ThanaId);
                

                $('#isElPos').prop('checked', popupData.IsElPos);
                $('#isSimPos').prop('checked', popupData.IsSimPos);
                $('#isSCPos').prop('checked', popupData.IsScPos);
                $('#isAppartment').prop('checked', popupData.IsApartments);
                $('#isSlum').prop('checked', popupData.IsSlums);
                $('#isSemiurbanHouseing').prop('checked', popupData.IsSemiUrbunHousing);
                $('#isRuralHousing').prop('checked', popupData.IsRuralHousing);
                $('#isShoppingMall').prop('checked', popupData.IsShoppingMall);
                $('#isRetailHub').prop('checked', popupData.IsRetailHub);
                $('#isMobileDevice').prop('checked', popupData.IsMobileDeviceMarket);
                $('#isBazar').prop('checked', popupData.IsBazzar);
                $('#isOfficeArea').prop('checked', popupData.IsOfficeArea);
                $('#isGarmentsMajority').prop('checked', popupData.IsGarmentsMajorityArea);
                $('#isGeneralIndustrial').prop('checked', popupData.IsGeneralIndustrialArea);
                $('#isUrbanTransit').prop('checked', popupData.IsUrbanTransitPoints);
                $('#isRuralTransit').prop('checked', popupData.IsRuralTransitPoints);
                $('#isUrbarHangouts').prop('checked', popupData.IsUrbanYouthHangouts);
                $('#isSemiUrbanHangouts').prop('checked', popupData.IsSemiUrbanYouthHangouts);
                $('#isRuralHangouts').prop('checked', popupData.IsRuralYouthHangouts);



                $('.tdRetailerName').html(popupData.RetailerName);
                $('#txtRetailerName').val(popupData.RetailerName);
                $('.tdAddress').html(popupData.Address);
                $('#txtAddress').val(popupData.Address);
                $('.tdRetailerType').html(popupData.RetailerType);
                $('#cmbRetailerType').val(popupData.RetailerTypeId);
                $('.tdElMsisdn').html(popupData.Elmsisdn);
                $('#txtElMsisdn').val(popupData.Elmsisdn);
                $('.tdDsrMsisdn').html(popupData.DsrMsisdn);
                $('.tdRoutePlan').html(popupData.DsrMsisdn + popupData.VisitDayCode);
                $('.tdVisitDay').html(popupData.VisitDay);
                $('#cmbVisitDay').val(popupData.VisitDayId);
                $('.tdrStructure').html(popupData.PosStructure);
                $('#cmbStructure').val(popupData.PosStructureId);
                $('#posImage').attr('src', '../../../../Photos/RetailerPhoto/' + popupData.PosImage);
                $('#qrImage').attr('src', '../../../../Photos/QRPhoto/' + popupData.QrCodeId + '.png');
                $('.tdShopSignage').html(popupData.ShopSignage);
                $('#cmbShopSignage').val(popupData.ShopSignageId);
                $('.tdShopType').html(popupData.ShopType);
                $('#cmbShopType').val(popupData.ShopTypeId);
                $('.tdDSR').html(popupData.Dsr);
                LoadMapSingle(markers);
            });




            $('#btnsearch').click(function () {

                SubmitThisForm();
            });
        });


        

    //Form Submit
    function SubmitThisForm() {
        var SubmitURL = '@Url.Action("SearchResult", "Home")';
        var FormData = $("#order-form").serialize();
        $.ajax({
            type: "POST",
            url: SubmitURL,
            data: FormData,
            dataType: "json",

            beforeSend: function () {
                //$(form).find('.btn').attr('disabled', 'disabled');
                //$(form).find('.btn').html('Working...');
            },
            success: function (result) {


                if (result.status == "success") {
                    var areaId = $('#areaCombo').val();
                    var rspId = $('#rspCombo').val();
                    var dsrId = $('#srCombo').val();
                    var sDate = $('#datepicker-icon').val();
                    var eDate = $('#datepicker-icon2').val();
                    $('#btnExport').attr('href', 'ExportToExcel?areId=' + areaId + '&rspId=' + rspId + '&srId=' + dsrId + '&sDate=' + sDate + '&eDate=' + eDate + '');
                    $('#btnExport2').attr('href', 'ExportToCSV?areId=' + areaId + '&rspId=' + rspId + '&srId=' + dsrId + '&sDate=' + sDate + '&eDate=' + eDate + '');
                    $('#data-table').dataTable().fnClearTable();
                    var markers = [];
                    $.each(result.data, function () {
                        var status = "";
                        if (this.Active == true) {
                            if (this.RetailerStatusId == 1) {
                                status = "Existing";
                            }
                            else if (this.RetailerStatusId == 2) {
                                status = "Updated";
                            }
                            else if (this.RetailerStatusId == 3) {
                                status = "Created";
                            }
                            else {
                                status = "Undefined";
                            }
                        }
                        else {
                            if (this.RetailerStatusId == 2) {
                                status = "Not Found";
                            }
                            else {
                                status = "Undefined";
                            }
                        }
                        var obj = new Object();
                        obj.title = this.Name;
                        obj.lat = this.Lat;
                        obj.lng = this.Lon;
                        //obj.description = '<p>Retailer Name :' + this.Name + ' </p><p>RSP Name : ' + this.RSPName + '</p><p>DSR : ' + this.DsrName + '</p><p>DSR MSISDN :' + this.DSRMSISDN + ' </p><p>Status :' + status + ' </p><p><img src="../../../Photos/RetailerPhoto/' + this.Photo + '" style="height:200px;"/></p>';
                        obj.description = '<div class="block well">' +
                                            '<div class="table-overflow">' +
                                            '    <table class="table table-striped" >' +
                                            '        <tr  class="success">' +
                                            '            <td>Retailer Name</td>' +
                                            '            <td>' + this.Name + '</td>' +
                                            '        </tr>' +
                                            '        <tr  class="error">' +
                                            '            <td>RSP Name</td>' +
                                            '            <td>' + this.RSPName + '</td>' +
                                            '        </tr>' +
                                            '        <tr class="warning">' +
                                            '            <td>DSR</td>' +
                                            '            <td>' + this.DsrName + '</td>' +
                                            '        </tr>' +
                                            '        <tr class="info">' +
                                            '            <td>DSR MSISDN</td>' +
                                            '            <td>' + this.DSRMSISDN + '</td>' +
                                            '        </tr>' +
                                            '        <tr  class="success">' +
                                            '            <td>Status</td>' +
                                            '            <td>' + status + '</td>' +
                                            '        </tr>' +
                                            '        <tr>' +
                                            '            <td colspan="2">' +
                                            '                <img src="../../../Photos/RetailerPhoto/' + this.Photo + '" style="height:200px;" />' +
                                            '            </td>' +
                                            '        </tr>' +
                                            '    </table>' +
                                            '</div>' +
                                          '</div>';
                        if (this.Lat != 0) {
                            markers.push(obj);
                        }
                            var addId = $('#data-table').dataTable().fnAddData([
                            this.AreaName,
                            this.RSPName,
                            this.DsrName,
                            this.DSRMSISDN,
                            this.Name,
                            status
                            ]);
                            var tr = $('#data-table').dataTable().fnSettings().aoData[addId].nTr;
                            $(tr).data('posData', this);
                    });

                    LoadMap(markers);
                }
                else {
                    alert('failed to retrive data.');
                }
            },
            error: function (request, status, error) {
                alert('failed.')
            },
            complete: function () {
                
            }
        });
        // return false;
    }
    //<-- submit form


   
    </script>


   
    <script>
        $(function () {
            $('#areaCombo').change(function () {
                var selectedVal = $('#areaCombo option:selected').attr('value');
                var urlData = '@Url.Action("GetRSP", "Home")';
                $.ajax({
                    type: "POST", url: urlData,
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify({ areaId: selectedVal }),
                    dataType: "json",
                    success: function (result) {
                        var combo = $('#rspCombo');
                        combo.empty();
                        combo.append('<option value=0>Select a RSP</option>');

                        $.each(result, function () {
                            combo.append('<option value="' + this.RSPId + '">' + this.RSPName + '</option>');
                        });
                    },
                    error: function (request, status, error) {
                        alert("Failed to load RSP list. Error Details-  Request: " + request + " Status: " + status + " Error: " + error);
                    }
                });
            });

            $('#rspCombo').change(function () {
                var selectedVal = $('#rspCombo option:selected').attr('value');
                var urlData = '@Url.Action("GetSR", "Home")';

                $.ajax({
                    type: "POST", url: urlData,
                    contentType: "application/json; charset=utf-8",

                    data: JSON.stringify({ rspId: selectedVal }),
                    dataType: "json",
                    success: function (result) {
                        var combo = $('#srCombo');
                        combo.empty();
                        combo.append('<option value=0>Select a SR</option>');

                        $.each(result, function () {
                            combo.append('<option value="' + this.SRId + '">' + this.SRName + '</option>');
                        });
                    },
                    error: function (request, status, error) {
                        alert("Failed to load RSP list. Error Details-  Request: " + request + " Status: " + status + " Error: " + error);
                    }
                });
            });
        });
    </script>


    <script>
        function LoadMap(markers) {
            if (markers.length > 0) {
                var mapOptions = {
                    scrollwheel: false,
                    center: new google.maps.LatLng(markers[0].lat, markers[0].lng),
                    zoom: 12,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                var infoWindow = new google.maps.InfoWindow();
                var map = new google.maps.Map(document.getElementById("mapcanvas"), mapOptions);


                for (i = 0; i < markers.length; i++) {
                    var data = markers[i]
                    var myLatlng = new google.maps.LatLng(data.lat, data.lng);
                    var iconName;
                    iconName = '../../../../Assets/SmartAdmin/img/red_MarkerR.png';


                    function toggleBounce() {
                        if (marker.getAnimation() != null) {
                            marker.setAnimation(null);
                        } else {
                            marker.setAnimation(google.maps.Animation.BOUNCE);
                        }
                    }

                    //toggleBounce();
                    var marker = new google.maps.Marker({
                        position: myLatlng,
                        map: map,
                        icon: iconName,
                        title: data.title,
                        animation: google.maps.Animation.DROP
                    });

                    //setTimeout(toggleBounce, 1500);


                    (function (marker, data) {

                        google.maps.event.addListener(marker, "click", function (e) {

                            //--> marker animation
                            marker.setAnimation(google.maps.Animation.BOUNCE);

                            stopAnimation(marker);

                            function stopAnimation(marker) {
                                setTimeout(function () {
                                    marker.setAnimation(null);
                                }, 3000);
                            }
                            //<-- marker animation

                            google.maps.event.addListenerOnce(infoWindow, 'domready', function () {
                            });

                            infoWindow.setContent(data.description);
                            infoWindow.open(map, marker);

                        });
                    })(marker, data);
                }

                //google map ends
                $('#mapcanvas').show();
                google.maps.event.trigger(map, 'resize');
                var center = new google.maps.LatLng(markers[0].lat, markers[0].lng);
                map.setCenter(center);
                map.setZoom(map.getZoom());

            }
            else {
                $('#mapcanvas').hide();
            }
            //google map
        }

    </script>

    <script>
        function LoadMapSingle(markers) {
            if (markers.length > 0) {
                var mapOptions = {
                    scrollwheel: false,
                    center: new google.maps.LatLng(markers[0].lat, markers[0].lng),
                    zoom: 12,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                var infoWindow = new google.maps.InfoWindow();
                var map = new google.maps.Map(document.getElementById("Retailermapcanvas"), mapOptions);


                for (i = 0; i < markers.length; i++) {
                    var data = markers[i]
                    var myLatlng = new google.maps.LatLng(data.lat, data.lng);
                    var iconName;
                    iconName = '../../../../Assets/SmartAdmin/img/red_MarkerR.png';


                    function toggleBounce() {
                        if (marker.getAnimation() != null) {
                            marker.setAnimation(null);
                        } else {
                            marker.setAnimation(google.maps.Animation.BOUNCE);
                        }
                    }

                    //toggleBounce();
                    var marker = new google.maps.Marker({
                        position: myLatlng,
                        map: map,
                        icon: iconName,
                        title: data.title,
                        animation: google.maps.Animation.DROP
                    });

                    //setTimeout(toggleBounce, 1500);


                    (function (marker, data) {

                        google.maps.event.addListener(marker, "click", function (e) {

                            //--> marker animation
                            marker.setAnimation(google.maps.Animation.BOUNCE);

                            stopAnimation(marker);

                            function stopAnimation(marker) {
                                setTimeout(function () {
                                    marker.setAnimation(null);
                                }, 3000);
                            }
                            //<-- marker animation

                            google.maps.event.addListenerOnce(infoWindow, 'domready', function () {
                            });

                            infoWindow.setContent(data.description);
                            infoWindow.open(map, marker);

                        });
                    })(marker, data);
                }

                //google map ends
                $('#mapcanvas').show();
                google.maps.event.trigger(map, 'resize');
                var center = new google.maps.LatLng(markers[0].lat, markers[0].lng);
                map.setCenter(center);
                map.setZoom(map.getZoom());

            }
            else {
                $('#mapcanvas').hide();
            }
            //google map
        }

    </script>

</body>
</html>
